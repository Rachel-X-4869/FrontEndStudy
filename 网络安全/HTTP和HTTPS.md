# HTTP和HTTPS

[TOC]

## 1. 什么是HTTP

HTTP是超文本传输协议，它是一个应用层协议，由请求和响应构成，它是一个无状态的协议

（无状态协议对于事务处理没有记忆能力，缺少状态意味着如果后续需要处理，需要前面提供的信息

克服无状态协议缺陷的办法是通过cookie和会话保存信息）

## 2. HTTP协议的特点是什么？

1. 无连接：限制每次连接只处理一个请求
2. 无状态：协议对于事务处理没有记忆能力
3. 简单快速：客户向服务器请求服务时，只需传送请求方法和路径
4. 灵活：HTTP允许传输任意类型的数据对象

## 3. HTTP有哪些请求方式？

- GET：请求访问已经被识别的资源，可以通过URL，给服务器传递参数信息
- POST：传递数据给服务器，主要功能与GET方法类似，但传递的数据量通常不受限制
- PUT：传输文件，报文主体中包含文件内容
- HEAD：获得报文首部
- DELETE：删除文件，删除对应URL位置的文件
- OPTIONS：查询相应URL支持的HTTP方法

## 4. GET和POST请求数据区别

- get传参方式是通过地址栏URL传递，是可以直接看到get传递的参数，post传参方式参数URL不可见，get把请求的数据在URL后通过?连接，通过&进行参数分割。psot将参数存放在HTTP的包体内;
- get传递数据是通过URL进行传递，对传递的数据长度是受到URL大小的限制，URL最大长度是2048个字符。post没有长度限制;, 即使用Get请求发送数据量小,Post请求发送数据量大
- get回退不会有影响，post回退会重新进行提交;
- get请求可以被缓存，post不可以被缓存;
- get请求只URL编码，post支持多种编码方式;
- get只支持ASCII字符，post提交没有字符类型限制;
- get请求的记录会留在历史记录中，post请求不会留在历史记录;

安全性：使用Get请求安全性低，会被缓存，而Post请求反之，post易于防止CSRF

使用场景：get一般用于查询操作，post一般用于用户提交操作

## 5. HTTP的请求报文和响应报文包含哪些部分？

- 请求报文
  1. 请求行，包含请求方法、URL、HTTP协议版本，它们之间用空格分隔（比如`GET /data/info.html HTTP/1.1`）
  2. 请求首部字段
  3. 空行：告诉服务器请求头部到此为止
  4. 请求内容实体：若方法是GET，此项为空；若方法是POST，此项放置要提交的数据
- 响应报文
  1. 响应（状态）行，包含HTTP协议版本、状态码及其描述，它们之间用空格分隔
  2. 响应首部字段
  3. 响应内容实体：如果请求纯数据就返回纯数据，请求HTML页面就返回HTML代码，请求JS就返回JS代码

## 6. HTTP状态码

- 2xx - 表示成功处理请求，如200
- 3xx - 需要重定向，浏览器直接跳转，如301（永久重定向） 302（临时重定向） 304（资源未改变）
- 4xx - 客户端请求错误，如404（请求地址有误） 403（客户端没有权限）
- 5xx - 服务器端有误

## 7. 什么是HTTP持久连接？

1. 在HTTP1.0中，当建立连接后，客户端发送一个请求，服务器端返回一个信息后就关闭连接，下次请求时又要建立连接
2. 在HTTP1.1中，默认使用持久连接，只要客户端或服务端没有明确指出断开TCP连接，就一直保持连接，可以多次发送HTTP请求

## 8. 什么是HTTP管线化？

1. HTTP管线化是HTTP1.1协议支持的机制，管线化后，请求和响应不再是依次交替的，可以一次性发送多个请求，并一次性接收多个响应
2. 只有GET与HEAD请求可以进行管线化，POST有限制
3. 初次创建连接时不应该启动管线机制，因为服务器不一定支持该协议

## 9. HTTP和HTTPS区别是什么

1. HTTP的默认端口是80，HTTPS的默认端口是443
2. HTTP传输采用明文不加密的方式；HTTPS传输采用密钥加密的方式
3. HTTP不验证通信方身份，无法验证报文完整性
4. 而HTTPS是HTTP + 加密处理 + 认证 + 完整性保护

## 9. HTTP和HTTPS区别是什么

1. HTTP的默认端口是80，HTTPS的默认端口是443
2. HTTP传输采用明文不加密的方式；HTTPS传输采用密钥加密的方式
3. HTTP不验证通信方身份，无法验证报文完整性
4. 而HTTPS是HTTP + 加密处理 + 认证 + 完整性保护

## 10. 对称加密是什么？

1. 对称加密指：信息的发送方和接收方使用同一个密钥去加密和解密数据
2. 特点：算法公开、加密和解密速度快，适合于对大数据量进行加密
3. 加密过程：明文 + 加密算法 + 密钥 = 密文
4. 解密过程：密文 + 加密算法 + 密钥 = 明文
5. 缺点：由于对称加密的算法是公开的，所以一旦密钥被泄露，那么密文就很容易被破解

## 11. 非对称加密是什么？

1. 非对称加密指：使用一对密钥进行加密，即公钥和私钥，私钥自己保存，公钥公开
2. 被公钥加密过的密文只能被私钥解密，被私钥加密过的密文只能被公钥解密
3. 缺点：加密和解密花费时间长、速度慢，只适合对少量数据进行加密

## 12. HTTPS的通信过程

1. HTTPS协议 = HTTP协议 + SSL/TLS协议
2. 在HTTPS数据传输的过程中，需要用SSL/TLS对数据进行加密和解密，需要用HTTP对加密后的数据进行传输
3. HTTPS为了兼顾安全与效率，同时使用了对称加密和非对称加密
4. 对数据进行对称加密，而对称加密所要使用的密钥通过非对称加密传输到服务器端

（SSL安全套接字协议层，SSL是基于HTTP之下TCP之上的一个协议层，是基于HTTP标准并对TCP传输数据时进行加密，TLS（传输层安全）是更为安全的升级版 SSL。TLS/SSL是一种加密通道的规范，它利用对称加密、公私钥不对称加密及其密钥交换算法，CA系统进行加密且可信任的信息传输）

## 13. HTTP浏览器缓存

缓存机制无处不在，有客户端缓存，服务端缓存，代理服务器缓存等。在HTTP中具有缓存功能的是浏览器缓存。我们认为浏览器存在一个缓存数据库，用于储存一些不经常变化的静态文件（图片、css、js等）。我们将缓存分为强制缓存和协商缓存。

- 强制缓存 当缓存数据库中已有所请求的数据时。客户端直接从缓存数据库中获取数据。当缓存数据库中没有所请求的数据时，客户端的才会从服务端获取数据。
- 协商缓存 又称对比缓存，客户端会先从缓存数据库中获取到一个缓存数据的标识，得到标识后请求服务端验证是否失效（新鲜），如果没有失效服务端会返回304，此时客户端直接从缓存中获取所请求的数据，如果标识失效，服务端会返回更新后的数据。

缓存的方案：我们知道浏览器和服务器进行交互的时候会发送一些请求数据和响应数据，我们称之为HTTP报文。报文中包含首部header和主体部分body。与缓存相关的规则信息就包含在header中。boby中的内容是HTTP请求真正要传输的部分。